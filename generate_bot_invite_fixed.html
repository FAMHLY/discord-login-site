<!DOCTYPE html>
<html>
<head>
    <title>Generate Discord Bot Invite Link (Fixed Permissions)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 20px; border-radius: 8px; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #5865F2; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #4752C4; }
        .result { margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 4px; }
        .permissions { margin: 15px 0; padding: 15px; background: #fff3cd; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ¤– Generate Discord Bot Invite Link</h1>
        <p>This will create a bot invite link with the correct permissions for join tracking.</p>
        
        <div class="permissions">
            <h3>Required Permissions:</h3>
            <ul>
                <li>âœ… <strong>View Server Members</strong> (Server Members Intent)</li>
                <li>âœ… <strong>Create Instant Invite</strong></li>
                <li>âœ… <strong>Read Message History</strong></li>
                <li>âœ… <strong>Send Messages</strong></li>
                <li>âœ… <strong>View Channels</strong></li>
            </ul>
        </div>
        
        <label for="clientId">Discord Application Client ID:</label>
        <input type="text" id="clientId" placeholder="Enter your bot's Client ID">
        
        <button onclick="generateInvite()">Generate Bot Invite Link</button>
        
        <div id="result" class="result" style="display: none;">
            <h3>Bot Invite Link:</h3>
            <p><a id="inviteLink" href="#" target="_blank"></a></p>
            <p><strong>Important:</strong> After inviting the bot, make sure to enable "Server Members Intent" in the Discord Developer Portal!</p>
        </div>
    </div>

    <script>
        function generateInvite() {
            const clientId = document.getElementById('clientId').value.trim();
            
            if (!clientId) {
                alert('Please enter your Discord Application Client ID');
                return;
            }
            
            // Permissions for join tracking
            const permissions = [
                'CREATE_INSTANT_INVITE',    // Create invite links
                'READ_MESSAGE_HISTORY',     // Read messages
                'SEND_MESSAGES',           // Send messages
                'VIEW_CHANNEL',            // View channels
                'MANAGE_GUILD'             // Manage server (for member access)
            ];
            
            // Calculate permission value
            const permissionValues = {
                'CREATE_INSTANT_INVITE': 0x00000001,
                'READ_MESSAGE_HISTORY': 0x00004000,
                'SEND_MESSAGES': 0x00000800,
                'VIEW_CHANNEL': 0x00001000,
                'MANAGE_GUILD': 0x00000020
            };
            
            let permissionInteger = 0;
            permissions.forEach(permission => {
                permissionInteger += permissionValues[permission] || 0;
            });
            
            // Generate invite URL
            const inviteUrl = `https://discord.com/api/oauth2/authorize?client_id=${clientId}&permissions=${permissionInteger}&scope=bot`;
            
            document.getElementById('inviteLink').href = inviteUrl;
            document.getElementById('inviteLink').textContent = inviteUrl;
            document.getElementById('result').style.display = 'block';
        }
    </script>
</body>
</html>
